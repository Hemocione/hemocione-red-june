---
import { ViewTransitions } from "astro:transitions";
import LoadingIndicator from "astro-loading-indicator/component";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import "../styles/global.css";

interface Props {
  title: string;
}

const { title } = Astro.props;

const pageTitle = title ? `Hemocione - ${title}` : "Hemocione";
---

<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Hemocione é uma ONG dedicada a promover a doação de sangue no Brasil. Organizamos eventos, criamos conteúdo educativo e artigos científicos para conscientizar sobre a importância da doação. Também desenvolvemos soluções inovadoras para facilitar a vida dos doadores, bancos de sangue e instituições parceiras. Junte-se a nós e ajude a salvar vidas."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://cdn.hemocione.com.br/events/uploads/1699940076138-logo_hemocione_fb-2(1).png"
    />
    <meta property="og:title" content="Hemocione - Doe Sangue, Doe Vida" />
    <meta
      property="og:description"
      content="Hemocione é uma ONG dedicada a promover a doação de sangue no Brasil. Organizamos eventos, criamos conteúdo educativo e artigos científicos para conscientizar sobre a importância da doação. Também desenvolvemos soluções inovadoras para facilitar a vida dos doadores, bancos de sangue e instituições parceiras. Junte-se a nós e ajude a salvar vidas."
    />
    <meta property="og:url" content="https://www.hemocione.com.br/" />
    <meta property="og:site_name" content="Hemocione" />
    <meta property="og:locale" content="pt-BR" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@hemocione" />
    <meta name="twitter:site" content="@hemocione" />
    <meta name="twitter:title" content="Hemocione - Doe Sangue, Doe Vida" />
    <meta
      name="twitter:description"
      content="Hemocione é uma ONG dedicada a promover a doação de sangue no Brasil. Organizamos eventos, criamos conteúdo educativo e artigos científicos para conscientizar sobre a importância da doação. Também desenvolvemos soluções inovadoras para facilitar a vida dos doadores, bancos de sangue e instituições parceiras. Junte-se a nós e ajude a salvar vidas."
    />
    <meta
      name="twitter:image"
      content="https://cdn.hemocione.com.br/events/uploads/1699940076138-logo_hemocione_fb-2(1).png"
    />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>{pageTitle}</title>
    <ViewTransitions />
    <LoadingIndicator color="var(--hemo-color-primary)" />

    <!-- Google tag (gtag.js) -->
    <script
      is:inline
      type="text/partytown"
      src="https://www.googletagmanager.com/gtag/js?id=G-75J9MM7SHP"></script>
    <script is:inline type="text/partytown">
      // @ts-expect-error - It's ok to use dataLayer here
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        // @ts-expect-error - DataLayer is defined
        dataLayer.push(arguments);
      }
      // @ts-expect-error - Gtag is defined with arguments
      gtag("js", new Date());
      // @ts-expect-error - Gtag is defined with arguments
      gtag("config", "G-75J9MM7SHP");
    </script>

    <script>
      // Garante que a classe 'dark' está correta no html antes de qualquer renderização
      (function () {
        try {
          var theme = localStorage.getItem("theme");
          if (!theme) {
            theme = window.matchMedia("(prefers-color-scheme: dark)").matches
              ? "dark"
              : "light";
          }
          if (theme === "dark") {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        } catch (e) {
          console.log("mamou");
          console.error(e);
        }
      })();
    </script>
  </head>
  <body>
    <a href="#main" class="skip-to-main-content">
      Ir para o conteúdo principal
    </a>
    <Navbar />
    <slot />
    <Footer />
    <style>
      body {
        display: flex;
        flex-direction: column;
      }

      .skip-to-main-content {
        position: absolute;
        left: -9999px;
        z-index: 999;
        padding: 1em;
        background-color: black;
        color: white;
        opacity: 0;
      }
      .skip-to-main-content:focus {
        left: 50%;
        transform: translateX(-50%);
        opacity: 1;
      }
    </style>

    <style is:global>
      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
    </style>
  </body>
</html>
